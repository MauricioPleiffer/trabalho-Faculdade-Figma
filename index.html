<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lave Já - Lavanderia</title>
    <!-- CSS do projeto -->
    <link rel="stylesheet" href="styles.css">
    <!-- Estilos inline para algumas coisas -->
    <style>
        /* Estilos básicos */
    </style>
</head>
<body>
    <!-- Cabeçalho do site -->
    <header>
        <div class="header">
            <div class="logo">
                <img src="imagem/lave.ja.png" alt="Logo Lave Já" width="60" style="border-radius: 5px;">
            </div>
            <nav>
                <a href="#servicos">Serviços</a>
                <a href="#precos">Preços</a>
                <a href="#sobre">Sobre</a>
                <a href="#contato">Contato</a>
                <button id="loginBtn" class="botao-login">Login</button>
            </nav>
        </div>
    </header>

    <!-- Seção principal -->
    <main>
        <section class="principal">
            <div class="conteudo-principal">
                <div class="texto-principal">
                    <h1>Lave Já - Sua Lavanderia de Confiança</h1>
                    <p>Serviços profissionais de lavagem, passadoria e entrega. Cuide das suas roupas com quem entende do assunto.</p>
                    <div class="botoes">
                        <a href="#contato" class="botao-principal">Solicitar Serviço</a>
                        <a href="#servicos" class="botao-secundario">Ver Serviços</a>
                    </div>
                </div>
                <div class="imagem-principal">
                    <img src="imagem/lavanderia.jpg" alt="Lavanderia Lave Já" style="border: 3px solid #007bff;">
                </div>
            </div>
        </section>

        <!-- Seção de serviços -->
        <section id="servicos">
            <div class="servicos">
                <div class="servico">
                    <img src="imagem/imagem2.jpg" alt="Lavagem de roupas">
                    <h3>Lavagem Profissional</h3>
                    <p>Roupas limpas e higienizadas com produtos de qualidade.</p>
                </div>
                <div class="servico">
                    <img src="imagem/roup.passad.avif" alt="Passadoria de roupas">
                    <h3>Passadoria Completa</h3>
                    <p>Roupas passadas e dobradas com cuidado e perfeição.</p>
                </div>
                <div class="servico">
                    <img src="imagem/unnamed.png" alt="Serviços de lavanderia">
                    <h3>Entrega Rápida</h3>
                    <p>Coleta e entrega no prazo combinado, sempre pontual.</p>
                </div>
            </div>
        </section>

        <!-- Seção de preços -->
        <section id="precos" class="precos">
            <div class="cards-precos">
                <div class="card-preco">
                    <h4>Lavagem Simples</h4>
                    <p class="preco">R$15<span>/kg</span></p>
                    <a href="#contato" class="botao">Solicitar</a>
                </div>
                <div class="card-preco destaque">
                    <h4>Lavagem + Passadoria</h4>
                    <p class="preco">R$25<span>/kg</span></p>
                    <a href="#contato" class="botao">Solicitar</a>
                </div>
                <div class="card-preco">
                    <h4>Serviço Completo</h4>
                    <p class="preco">Sob consulta</p>
                    <a href="#contato" class="botao-secundario">Contato</a>
                </div>
            </div>
        </section>

        <!-- Seção sobre -->
        <section id="sobre">
            <div class="sobre">
                <div class="texto-sobre">
                    <h2>Sobre a Lave Já</h2>
                    <p>Somos uma lavanderia moderna e confiável, especializada em cuidar das suas roupas com carinho e profissionalismo. Oferecemos serviços completos de lavagem, passadoria e entrega, sempre pensando na comodidade dos nossos clientes.</p>
                    <p>Com anos de experiência no mercado, garantimos qualidade, pontualidade e satisfação total em cada serviço prestado.</p>
                </div>
                <div class="imagem-sobre">
                        <script>
                // código simples, estilo iniciante, mantém tudo funcionando
                var usuarios = [];
                var usuarioLogado = null;

                // carrega do localStorage
                if (localStorage.getItem('usuarios')) {
                    usuarios = JSON.parse(localStorage.getItem('usuarios'));
                }
                if (localStorage.getItem('usuarioLogado')) {
                    usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
                }

                // usuário de exemplo se não tiver nenhum
                if (usuarios.length === 0) {
                    usuarios.push({ id: 1, nome: 'João Silva', email: 'joao@teste.com', senha: '123456', telefone: '(11) 99999-9999' });
                    localStorage.setItem('usuarios', JSON.stringify(usuarios));
                }

                function abrirLogin() {
                    var m = document.getElementById('loginModal');
                    if (m) m.style.display = 'block';
                }
                function fecharLogin() {
                    var m = document.getElementById('loginModal');
                    if (m) m.style.display = 'none';
                }
                function abrirCadastro() {
                    var m = document.getElementById('cadastroModal');
                    if (m) m.style.display = 'block';
                }
                function fecharCadastro() {
                    var m = document.getElementById('cadastroModal');
                    if (m) m.style.display = 'none';
                }

                function atualizarBotao() {
                    var b = document.getElementById('loginBtn');
                    if (!b) return;
                    if (usuarioLogado) {
                        b.textContent = 'Olá, ' + usuarioLogado.nome;
                        b.style.backgroundColor = '#28a745';
                    } else {
                        b.textContent = 'Login';
                        b.style.backgroundColor = '';
                    }
                }

                function fazerLogin(email, senha) {
                    for (var i = 0; i < usuarios.length; i++) {
                        if (usuarios[i].email === email && usuarios[i].senha === senha) {
                            usuarioLogado = usuarios[i];
                            localStorage.setItem('usuarioLogado', JSON.stringify(usuarioLogado));
                            return true;
                        }
                    }
                    return false;
                }

                function fazerLogout() {
                    usuarioLogado = null;
                    localStorage.removeItem('usuarioLogado');
                    atualizarBotao();
                }

                function cadastrarUsuario(nome, email, senha, tel) {
                    for (var i = 0; i < usuarios.length; i++) {
                        if (usuarios[i].email === email) return { erro: 'Email ja cadastrado' };
                    }
                    var novo = { id: Date.now(), nome: nome, email: email, senha: senha, telefone: tel };
                    usuarios.push(novo);
                    localStorage.setItem('usuarios', JSON.stringify(usuarios));
                    return { ok: true };
                }

                window.addEventListener('load', function () {
                    atualizarBotao();

                    var loginBtn = document.getElementById('loginBtn');
                    if (loginBtn) {
                        loginBtn.onclick = function () {
                            if (usuarioLogado) {
                                if (confirm('Deseja sair?')) { fazerLogout(); }
                            } else {
                                abrirLogin();
                            }
                        };
                    }

                    var closeLogin = document.querySelector('.close');
                    if (closeLogin) closeLogin.onclick = fecharLogin;
                    var closeCad = document.querySelector('.close-cadastro');
                    if (closeCad) closeCad.onclick = fecharCadastro;

                    var formLogin = document.getElementById('loginForm');
                    if (formLogin) {
                        formLogin.onsubmit = function (e) {
                            e.preventDefault();
                            var email = document.getElementById('email').value.trim();
                            var senha = document.getElementById('senha').value;
                            if (fazerLogin(email, senha)) {
                                alert('Login ok!');
                                fecharLogin();
                                atualizarBotao();
                                formLogin.reset();
                            } else {
                                alert('Email ou senha errados.');
                            }
                        };
                    }

                    var cadastroLink = document.getElementById('cadastroLink');
                    if (cadastroLink) cadastroLink.onclick = function (e) { e.preventDefault(); fecharLogin(); abrirCadastro(); };

                    // se clicar em serviços e não estiver logado, abre o login
                    var servicosLink = document.querySelector('a[href="#servicos"]');
                    if (servicosLink) {
                        servicosLink.onclick = function (e) {
                            if (!usuarioLogado) {
                                e.preventDefault();
                                abrirLogin();
                            }
                        };
                    }

                    // todos os botões de pedir/serviços devem abrir o login se não logado
                    var serviceAnchors = document.querySelectorAll('a.botao-principal, a.botao, a.botao-secundario');
                    for (var i = 0; i < serviceAnchors.length; i++) {
                        (function(el){
                            if (el && el.tagName && el.tagName.toLowerCase() === 'a') {
                                el.onclick = function (e) {
                                    if (!usuarioLogado) {
                                        e.preventDefault();
                                        abrirLogin();
                                    }
                                };
                            }
                        })(serviceAnchors[i]);
                    }

                    var formCad = document.getElementById('cadastroForm');
                    if (formCad) {
                        formCad.onsubmit = function (e) {
                            e.preventDefault();
                            var nome = document.getElementById('nomeCadastro').value.trim();
                            var email = document.getElementById('emailCadastro').value.trim();
                            var senha = document.getElementById('senhaCadastro').value;
                            var conf = document.getElementById('confirmarSenha').value;
                            var tel = document.getElementById('telefoneCadastro').value.trim();
                            if (senha.length < 6) { alert('Senha precisa ter 6 ou mais caracteres'); return; }
                            if (senha !== conf) { alert('As senhas não batem'); return; }
                            var r = cadastrarUsuario(nome, email, senha, tel);
                            if (r.erro) { alert(r.erro); return; }
                            alert('Cadastro feito! Faça login.');
                            fecharCadastro();
                            abrirLogin();
                            formCad.reset();
                        };
                    }
                });
                        </script>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Criar Conta</h2>
                <span class="close-cadastro">&times;</span>
            </div>
            <div class="modal-body">
                <form id="cadastroForm">
                    <div class="input-group">
                        <label for="nomeCadastro">Nome completo:</label>
                        <input type="text" id="nomeCadastro" placeholder="Seu nome completo" required>
                    </div>
                    <div class="input-group">
                        <label for="emailCadastro">Email:</label>
                        <input type="email" id="emailCadastro" placeholder="seu@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="senhaCadastro">Senha:</label>
                        <input type="password" id="senhaCadastro" placeholder="Mínimo 6 caracteres" required>
                    </div>
                    <div class="input-group">
                        <label for="confirmarSenha">Confirmar senha:</label>
                        <input type="password" id="confirmarSenha" placeholder="Digite a senha novamente" required>
                    </div>
                    <div class="input-group">
                        <label for="telefoneCadastro">Telefone:</label>
                        <input type="tel" id="telefoneCadastro" placeholder="(11) 99999-9999" required>
                    </div>
                    <button type="submit" class="botao-login-submit">Criar Conta</button>
                </form>
                <div class="cadastro-link">
                    <p>Já tem uma conta? <a href="#" id="loginLink">Faça login aqui</a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
// --- Código simplificado e comentado em linguagem simples ---
var usuarios = [];
var usuarioLogado = null;

// carrega dados do navegador
if (localStorage.getItem('usuarios')) {
  usuarios = JSON.parse(localStorage.getItem('usuarios'));
}
if (localStorage.getItem('usuarioLogado')) {
  usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
}

// se não tem usuário, cria um de teste
if (usuarios.length === 0) {
  usuarios.push({ id: 1, nome: 'João Silva', email: 'joao@teste.com', senha: '123456', telefone: '(11) 99999-9999' });
  localStorage.setItem('usuarios', JSON.stringify(usuarios));
}

// Debug helpers: report runtime errors and simple runtime logs so we can inspect the live site console
window.addEventListener('error', function (evt) {
    try {
        console.error('Runtime error caught:', evt && evt.message ? evt.message : evt);
    } catch (e) {
        // ignore
    }
});
console.log('[site] script loaded, usuarios.length=', usuarios.length, 'usuarioLogado=', usuarioLogado);

function abrirLogin() { var m = document.getElementById('loginModal'); if (m) m.style.display = 'block'; }
function fecharLogin() { var m = document.getElementById('loginModal'); if (m) m.style.display = 'none'; }
function abrirCadastro() { var m = document.getElementById('cadastroModal'); if (m) m.style.display = 'block'; }
function fecharCadastro() { var m = document.getElementById('cadastroModal'); if (m) m.style.display = 'none'; }

function atualizarBotao() {
  var b = document.getElementById('loginBtn');
  if (!b) return;
  if (usuarioLogado) {
    b.textContent = 'Olá, ' + usuarioLogado.nome;
    b.style.backgroundColor = '#28a745';
  } else {
    b.textContent = 'Login';
    b.style.backgroundColor = '';
  }
}

function fazerLogin(email, senha) {
  for (var i = 0; i < usuarios.length; i++) {
    if (usuarios[i].email === email && usuarios[i].senha === senha) {
      usuarioLogado = usuarios[i];
      localStorage.setItem('usuarioLogado', JSON.stringify(usuarioLogado));
      return true;
    }
  }
  return false;
}

function fazerLogout() { usuarioLogado = null; localStorage.removeItem('usuarioLogado'); atualizarBotao(); }

function cadastrarUsuario(nome, email, senha, tel) {
  for (var i = 0; i < usuarios.length; i++) {
    if (usuarios[i].email === email) return { erro: 'Email ja cadastrado' };
  }
  var novo = { id: Date.now(), nome: nome, email: email, senha: senha, telefone: tel };
  usuarios.push(novo);
  localStorage.setItem('usuarios', JSON.stringify(usuarios));
  return { ok: true };
}

window.addEventListener('load', function () {
    try {
        console.log('[site] window.load - iniciando registro de listeners');
        atualizarBotao();
    } catch (e) { console.error('[site] erro ao atualizar botao', e); }
  var loginBtn = document.getElementById('loginBtn');
  if (loginBtn) {
        loginBtn.addEventListener('click', function () {
            try {
                console.log('[site] loginBtn clicked, usuarioLogado=', usuarioLogado);
                if (usuarioLogado) {
                    if (confirm('Deseja sair?')) { fazerLogout(); }
                } else { abrirLogin(); }
            } catch (e) { console.error('[site] erro no loginBtn handler', e); }
        });
  }
    var closeLogin = document.querySelector('.close'); if (closeLogin) closeLogin.addEventListener('click', fecharLogin);
    var closeCad = document.querySelector('.close-cadastro'); if (closeCad) closeCad.addEventListener('click', fecharCadastro);

  var formLogin = document.getElementById('loginForm');
  if (formLogin) {
    formLogin.addEventListener('submit', function (e) {
      e.preventDefault();
      var email = document.getElementById('email').value.trim();
      var senha = document.getElementById('senha').value;
      if (fazerLogin(email, senha)) { alert('Login ok!'); fecharLogin(); atualizarBotao(); formLogin.reset(); }
      else { alert('Email ou senha errados.'); }
    });
  }

  var cadastroLink = document.getElementById('cadastroLink');
  if (cadastroLink) cadastroLink.addEventListener('click', function (e) { e.preventDefault(); fecharLogin(); abrirCadastro(); });

    // Se o usuário clicar em 'Serviços' e não estiver logado, abre cadastro
        var servicosLink = document.querySelector('a[href="#servicos"]');
        if (servicosLink) {
            try {
                console.log('[site] encontrado servicosLink');
                servicosLink.addEventListener('click', function(e) {
                    // se não estiver logado, abre o modal de login e impede a âncora
                    console.log('[site] servicosLink clicked, usuarioLogado=', usuarioLogado);
                    if (!usuarioLogado) {
                        e.preventDefault();
                        abrirLogin();
                    }
                    // se estiver logado, deixa o comportamento padrão (rolar para a seção)
                });
            } catch (e) { console.error('[site] erro ao registrar servicosLink', e); }
        } else { console.log('[site] servicosLink não encontrado'); }

            // Garantir que todos os links de "Solicitar"/"Ver Serviços" abram o login se não estiver logado
            var serviceAnchors = document.querySelectorAll('a.botao-principal, a.botao, a.botao-secundario');
            console.log('[site] serviceAnchors encontrados:', serviceAnchors.length);
            serviceAnchors.forEach(function(el) {
                try {
                    // apenas anchors (evita afetar botões <button>)
                    if (el && el.tagName && el.tagName.toLowerCase() === 'a') {
                        el.addEventListener('click', function(e) {
                            console.log('[site] service anchor clicked:', el.href || el.textContent, 'usuarioLogado=', usuarioLogado);
                            if (!usuarioLogado) {
                                e.preventDefault();
                                abrirLogin();
                            }
                        });
                    }
                } catch (e) { console.error('[site] erro ao registrar serviceAnchor', e); }
            });

  var formCad = document.getElementById('cadastroForm');
  if (formCad) {
    formCad.addEventListener('submit', function (e) {
      e.preventDefault();
      var nome = document.getElementById('nomeCadastro').value.trim();
      var email = document.getElementById('emailCadastro').value.trim();
      var senha = document.getElementById('senhaCadastro').value;
      var conf = document.getElementById('confirmarSenha').value;
      var tel = document.getElementById('telefoneCadastro').value.trim();
      if (senha.length < 6) { alert('Senha precisa ter 6 ou mais caracteres'); return; }
      if (senha !== conf) { alert('As senhas não batem'); return; }
      var r = cadastrarUsuario(nome, email, senha, tel);
      if (r.erro) { alert(r.erro); return; }
      alert('Cadastro feito! Faça login.'); fecharCadastro(); abrirLogin(); formCad.reset();
    });
  }
});
    </script>
</body>
</html>
